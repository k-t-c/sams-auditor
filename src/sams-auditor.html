<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>The FRAUDitor</title>
  </head>
  <body>
    <nav class="tab-bar">
      <button class="tab-button active" data-tab="uploadView">Upload</button>
      <button class="tab-button disabled" data-tab="arsenalView">Arsenal Purchases</button>
      <button class="tab-button disabled" data-tab="reportView">Report</button>
      <button class="tab-button disabled" data-tab="itemLimitsView">Item Limits</button>
      <button class="tab-button disabled" data-tab="peopleView">People</button>
    </nav>

    <div id="toastContainer"></div>

    <div id="uploadView" class="tab-content active">
      <h1>Upload Bank Transaction CSV file</h1>
      <input type="file" id="csvUpload" accept=".csv" />
      <br>
      <div id="uploadViewNotice">
        <p>Upload a file to begin</p>
      </div>
    </div>
        
    <div id="arsenalView" class="tab-content">
      <label for="arsenalItemSelector">Item:</label>
      <select id="arsenalItemSelector"></select>

      <label for="arsenalChartType">Chart Type:</label>
      <select id="arsenalChartType">
        <option value="bar">Bar</option>
        <option value="line">Line</option>
      </select>

      <!-- <label for="tableViewMode">Table View:</label>
      <select id="tableViewMode">
        <option value="flat">By Timestamp</option>
        <option value="grouped">Grouped by Initiator</option>
      </select>
      <label for="buyerSelector">Buyer:</label>
      <select id="buyerSelector">
        <option value="All Buyers">All Buyers</option>
      </select> -->

      <div class="chart-container">
        <canvas id="purchaseChart"></canvas>
      </div>
      <div id="arsenalTable"></div>
    </div>

    <div id="reportView" class="tab-content">
      <button id="exportBtn" onclick="reportExportViolationsReport()">Export Report</button>
      <div id="violationsReport"></div>
    </div>

    <div id="itemLimitsView" class="tab-content"></div>
    
    <div id="peopleView" class="tab-content">
      <div id="peopleDropdownsContainer">
        <div id="peopleDatalistContainer">
          <label for="peopleDatalistInput">Choose a person:</label>
          <input id="peopleDatalistInput" 
            type="text" 
            name="peopleDatalist" 
            list="peopleDatalist"
            placeholder="Start typing..."
            autocomplete="off">
          <datalist id="peopleDatalist">
          </datalist>
        </div>
        <div id="peopleTransactionTypeSelectContainer">
          <label for="peopleTransactionTypeSelect">Choose a transaction type:</label>
          <select id="peopleTransactionTypeSelect">
            <option value="all">All</option>
            <option value="arsenal">Arsenal</option>
            <option value="check">Check</option>
            <option value="deposit">Deposit</option>
            <option value="invoice">Invoice</option>
            <option value="payment">Payment</option>
            <option value="salary">Salary</option>
            <option value="transferIn">Transfer In</option>
            <option value="transferOut">Transfer Out</option>
            <option value="withdraw">Withdrawal</option>
            <option value="other">Other</option>

          </select>
        </div>
      </div>

      <div id="peopleContentArea">Data not available.</div>
    </div>
    
    <!-- Item Definitions JS files -->
    <script src="./js/items.js"></script>

    <!-- 
        Disabled to avoid CORS errors while developing and testing
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
        -->

    <!-- local copies for local developing and testing -->
    <script src="./js/chart.js"></script>
    <script src="./js/papaparse.min.js"></script>

    <!-- Report JS files -->
    <script src="./js/report/reportModel.js"></script>
    <script src="./js/report/reportView.js"></script>
    <script src="./js/report/reportController.js"></script>
    
    <!-- Arsenal JS files -->
    <script src="./js/arsenal/arsenalModel.js"></script>
    <script src="./js/arsenal/arsenalView.js"></script>
    <script src="./js/arsenal/arsenalController.js"></script>
  
    <!-- Item Limits JS files -->
    <script src="./js/limits/limitsModel.js"></script>
    <script src="./js/limits/limitsView.js"></script>
    <script src="./js/limits/limitsController.js"></script>
    
    <!-- People JS files -->
    <script src="./js/people/peopleModel.js"></script>
    <script src="./js/people/peopleView.js"></script>
    <script src="./js/people/peopleController.js"></script>

    <!-- Upload JS files -->
    <script src="./js/upload/uploadModel.js"></script>
    <script src="./js/upload/uploadView.js"></script>
    <script src="./js/upload/uploadController.js"></script>
    <link rel="stylesheet" href="./css/styles.css" />

    <!-- Main JS file -->
    
    <script src="./js/main.js"></script>
  </body>
</html>
